//0.1.19
!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=3)}([function(module,exports,__webpack_require__){"use strict";(function(process,global){function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}var eva_framework_version="0.1.19";!function(){if("undefined"!=typeof window)var fetch=window.fetch,WebSocket=window.WebSocket;else if(void 0!==process&&"browser"!==process.title)var fetch=__webpack_require__(5),WebSocket=__webpack_require__(6);var jsaltt=__webpack_require__(2),cookies=__webpack_require__(8),EVA=function(){function EVA(){_classCallCheck(this,EVA),this.version=eva_framework_version,this.login="",this.password="",this.apikey="",this.api_uri="",this.set_auth_cookies=!0,this.global_cvars=!0,this.api_token="",this.authorized_user=null,this.logged_in=!1,this.debug=!1,this.state_updates=!0,this.ws_mode=void 0!==WebSocket,this.ws=null,this.log={level:20,records:200},this._handlers={"heartbeat.error":this.restart},this._intervals={ajax_reload:2,ajax_log_reload:2,heartbeat:5,reload:5,restart:1},this.log_level_names={10:"DEBUG",20:"INFO",30:"WARNING",40:"ERROR",50:"CRITICAL"},this._heartbeat_reloader=null,this._ajax_reloader=null,this._log_reloader=null,this._scheduled_restarter=null,this._update_state_functions=[],this._update_state_mask_functions=[],this._clear()}return _createClass(EVA,[{key:"_clear",value:function(){this.server_info=null,this.tsdiff=null,this._states=[],this._cvars={},this._log_subscribed=!1,this._log_first_load=!0,this._log_loaded=!1,this._log_started=!1,this._lr2p=[],this._last_ping=null,this._last_pong=null}},{key:"start",value:function(){if(this._cancel_scheduled_restart(),this._debug("framework","version: ".concat(this.version)),void 0===fetch)return jsaltt.logger.error('"fetch" function is unavailable. Upgrade your web browser or connect polyfill (lib/polyfill/fetch.js)'),!1;if(this.logged_in)return this._debug("start","already logged in"),!0;this._last_ping=null,this._last_pong=null;var e={};if(this.apikey)e={k:this.apikey},this._debug("start","logging in with API key");else if(this.password)e={u:this.login,p:this.password},this._debug("start","logging in with password");else if(this.set_auth_cookies){var t=cookies.read("auth");t?(e={a:t},this._debug("start","logging in with auth token")):this._debug("start","logging in without credentials")}var o,r=this;return this._api_call("login",e).then(function(e){return r.api_token=e.token,o=e.user,r._set_token_cookie(),Promise.all([r._load_states(),r._heartbeat(r,!0),r._start_ws()])}).then(function(){r.ws_mode?(r._ajax_reloader&&clearInterval(r._ajax_reloader),r._intervals.reload&&(r._ajax_reloader=setInterval(function(){r._load_states(r).then(function(){}).catch(function(e){})},1e3*r._intervals.reload))):(r._ajax_reloader&&clearInterval(r._ajax_reloader),r._ajax_reloader=setInterval(function(){r._load_states(r).then(function(){}).catch(function(e){})},1e3*r._intervals.ajax_reload)),r._heartbeat_reloader&&clearInterval(r._heartbeat_reloader),r._heartbeat_reloader=setInterval(function(){r._heartbeat(r).then(function(){}).catch(function(){})},1e3*r._intervals.heartbeat),r._debug("start","login successful, user: ".concat(o)),r.logged_in=!0,r.authorized_user=o,r._invoke_handler("login.success")}).catch(function(e){r.logged_in=!1,void 0===e.code&&(e.code=4,e.message="Unknown error"),r._debug("start","login failed: ".concat(e.code," (").concat(e.message,")")),r._stop_engine(),r.erase_token_cookie(),r._invoke_handler("login.failed",e)}),!0}},{key:"log_start",value:function(e){if(this._log_started=!0,void 0!==e&&(this.log.level=e),(!this.ws_mode||this._log_first_load)&&(this._log_loaded=!1,this._load_log_entries(!0),!this.ws_mode)){var t=this;this._log_reloader=setInterval(function(){t._load_log_entries(!1,t)},1e3*this._intervals.ajax_log_reload)}}},{key:"log_level",value:function(e){this.log.level=e,this._set_ws_log_level(e),this._load_log_entries(!0)}},{key:"restart",value:function(){this._cancel_scheduled_restart(),this._debug("restart","performing restart");var e=this;this.stop(!0).then(function(){e._schedule_restart()}).catch(function(){e._schedule_restart()})}},{key:"erase_token_cookie",value:function(){this.api_token="",this.authorized_user=null,this._set_token_cookie()}},{key:"call",value:function(e,t,o){var r;"string"==typeof t||Array.isArray(t)?(r=jsaltt.extend({},o)).i=t:r=t;var n=this._prepare_call_params(r);return this._api_call(e,n)}},{key:"on",value:function(e,t){this._handlers[e]=t,this._debug("on","setting handler for "+e)}},{key:"interval",value:function(e,t){this._intervals[e]=t}},{key:"cvar",value:function(e){return this._cvars[e]}},{key:"watch",value:function(e,t){if(e.includes("*")){e in this._update_state_mask_functions||(this._update_state_mask_functions[e]=[]),this._update_state_mask_functions[e].push(t);var o=this.state(e);Array.isArray(o)?o.map(t):t(o)}else{e in this._update_state_functions||(this._update_state_functions[e]=[]),this._update_state_functions[e].push(t);var r=this.state(e);void 0!==r&&t(r)}}},{key:"status",value:function(e){var t=this.state(e);if(null!=t)return t.status}},{key:"value",value:function(e){var t=this.state(e);if(null!=t)return Number(t.value)==t.value?Number(t.value):t.value}},{key:"state",value:function(e){if(!e.includes("*"))return e in this._states?this._states[e]:void 0;var t=[];return Object.keys(this._states).map(function(o){this._oid_match(o,e)&&t.push(this._states[o])},this),t}},{key:"expires_in",value:function(e){var t=this.state((e.startsWith("lvar:")?"":"lvar:")+e);if(void 0!==t){if(void 0===t.expires||0==t.expires)return null;if(null!=this.tsdiff){if(0==t.status)return-2;if(-1==t.status)return-1;var o=t.expires-(new Date).getTime()/1e3+this.tsdiff+t.set_time;return o<0&&(o=0),o}}}},{key:"stop",value:function(e){var t=this;return new Promise(function(o,r){t._stop_engine(),t.logged_in=!1,t.call("logout").then(function(){e||t.erase_token_cookie(),o()}).catch(function(o){e||t.erase_token_cookie(),r(o)})})}},{key:"_uuidv4",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?o:3&o|8).toString(16)})}},{key:"_api_call",value:function(e,t){var o=this._uuidv4(),r=this.api_uri+"/jrpc",n=this;return this._debug("_api_call","".concat(o,": ").concat(r,": ").concat(e)),new Promise(function(a,s){var i={jsonrpc:"2.0",method:e,params:t,id:o};fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},redirect:"error",body:JSON.stringify(i)}).then(function(e){if(e.ok)n._debug("_api_call",o+" success"),e.json().then(function(e){!1 in e||e.id!=o||!1 in e&&!1 in e?s({code:9,message:"Invalid server response",data:e}):"error"in e?(n._debug("_api_call","".concat(o," failed: ").concat(e.error.code," (").concat(e.error.message,")")),s({code:e.error.code,message:e.error.message,data:e})):a(e.result)}).catch(function(e){var t="Invalid server response";n._debug("_api_call","".concat(o," failed: ").concat(9," (").concat(t,")")),s({code:9,message:t,data:data})});else{n._debug("_api_call","".concat(o," failed: ").concat(7," (").concat("Server error",")")),s({code:7,message:"Server error",data:data})}}).catch(function(e){n._debug("_api_call","".concat(o," failed: ").concat(7," (").concat("Server error",")")),s({code:7,message:"Server error",data:null})})})}},{key:"_heartbeat",value:function _heartbeat(me,on_login){return new Promise(function(resolve,reject){on_login&&(me._last_ping=null);var q={};if(on_login&&(q.icvars=1),me.ws_mode&&(null!==me._last_ping&&(null===me._last_pong||me._last_ping-me._last_pong>me._intervals.heartbeat)&&(me._debug("heartbeat","error: ws ping timeout"),me._invoke_handler("heartbeat.error")),!on_login&&me.ws)){me._last_ping=Date.now()/1e3;try{me._debug("heartbeat","ws ping"),me.ws.send(JSON.stringify({s:"ping"}))}catch(e){return me._debug("heartbeat","error: unable to send ws ping"),me._invoke_handler("heartbeat_error",e),void reject()}}me.call("test",q).then(function(data){me.server_info=data,me.tsdiff=(new Date).getTime()/1e3-data.time,on_login&&(data.cvars?(me._cvars=data.cvars,me.global_cvars&&Object.keys(data.cvars).map(function(k){void 0!==global&&eval("global.".concat(k,'="').concat(data.cvars[k],'"')),"undefined"!=typeof window&&eval("window.".concat(k,'="').concat(data.cvars[k],'"'))})):me._cvars={}),me._invoke_handler("heartbeat.success"),resolve(!0)}).catch(function(e){me._debug("heartbeat","error: unable to send test API call"),me._invoke_handler("heartbeat.error",e)}),me._debug("heartbeat","ok")})}},{key:"_load_log_entries",value:function(e,t){if(!t)t=this;t.ws_mode&&(t._lr2p=[]),t.call("log_get",{l:t.log.level,n:t.log.records}).then(function(o){t.ws_mode&&t._log_first_load&&t._set_ws_log_level(t.log.level),o.map(function(e){return t._invoke_handler("log.record",e)}),t._log_loaded=!0,t._lr2p.map(function(e){return t._invoke_handler("log.record",e)}),e&&t._invoke_handler("log.postprocess"),t._log_first_load=!1}).catch(function(e){jsaltt.logger.error("unable to load log entries")})}},{key:"_schedule_restart",value:function(){var e=this;e._scheduled_restarter=setTimeout(function(){e.start()},1e3*e._intervals.restart)}},{key:"_cancel_scheduled_restart",value:function(){this._scheduled_restarter&&(clearTimeout(this._scheduled_restarter),this._scheduled_restarter=null)}},{key:"_stop_engine",value:function(){if(this._clear(),this._heartbeat_reloader&&(clearInterval(this._heartbeat_reloader),this._heartbeat_reloader=null),this._ajax_reloader&&(clearInterval(this._ajax_reloader),this._ajax_reloader=null),this._log_reloader&&(clearInterval(this._log_reloader),this._log_reloader=null),this.ws)try{this.ws.onclose=null,this.ws.onerror=function(){},this.ws.close()}catch(t){var e=this.ws;setTimeout(function(){try{e.close()}catch(e){}},1e3)}}},{key:"_prepare_call_params",value:function(e){var t=e||{};return this.api_token&&(t.k=this.api_token),t}},{key:"_set_token_cookie",value:function(){var e=this;this.set_auth_cookies&&"undefined"!=typeof document&&["/ui","/pvt","/rpvt"].map(function(t){return document.cookie="auth=".concat(e.api_token,"; path=").concat(t)},this)}},{key:"_load_states",value:function(e){if(!e)e=this;return new Promise(function(t,o){if(e.state_updates){var r={};if(!0!==e.state_updates){var n=e.state_updates.g,a=e.state_updates.p;n&&(r.g=n),a&&(r.p=a)}e.call("state_all",r).then(function(o){o.map(function(t){return e._process_state(t)}),t(!0)}).catch(function(e){o(e)})}else t(!0)})}},{key:"_start_ws",value:function(){var e=this;return new Promise(function(t,o){if(e.ws_mode){var r;if(e.api_uri)r=e.api_uri;else{var n=window.location;r="https:"===n.protocol?"wss:":"ws:",r+="//"+n.host}e.ws=new WebSocket("".concat(r,"/ws?k=").concat(e.api_token)),e.ws.onmessage=function(t){e._process_ws(t)},e.ws.addEventListener("open",function(t){var o;if(e._debug("_start_ws","ws connected"),e.state_updates&&(o={s:"state"},!0!==e.state_updates)){var r=e.state_updates.g;r||(r="#");var n=e.state_updates.p;n||(n="#"),o.g=r,o.tp=n,o.i=[]}o&&e.ws.send(JSON.stringify(o)),e._log_subscribed&&e.log_level(e.log.level)})}t(!0)})}},{key:"_set_ws_log_level",value:function(e){this._log_subscribed=!0;try{this.ws&&this.ws.send(JSON.stringify({s:"log",l:e}))}catch(e){this._debug("log_level","warning: unable to send ws packet")}}},{key:"_process_ws",value:function(e){var t=this,o=JSON.parse(e.data);return"pong"==o.s?(this._debug("ws","pong"),void(this._last_pong=Date.now()/1e3)):"reload"==o.s?(this._debug("ws","reload"),this._invoke_handler("server.reload")):"server"==o.s&&"restart"==o.d?(this._debug("ws","server_restart"),this._invoke_handler("server.restart")):!1!==this._invoke_handler("ws.event",o)?"state"==o.s?(this._debug("ws","state"),void(Array.isArray(o.d)?o.d.map(function(e){return t._process_state(e)},this):this._process_state(o.d))):"log"==o.s?(Array.isArray(o.d)?o.d.map(function(e){return t._preprocess_log_record(e)},this):this._preprocess_log_record(o.d),void this._invoke_handler("log.postprocess")):void 0:void 0}},{key:"_preprocess_log_record",value:function(e){this._log_loaded?this._invoke_handler("log.record",e):this._lr2p.push(e)}},{key:"_process_state",value:function _process_state(state){var z=[],x=[];try{var oid=state.oid;if(oid in this._states){var old_state=this._states[oid];z="",Object.keys(old_state).map(function(e){e in state||(state[e]=old_state[e])})}this._states[oid]=state,jsaltt.cmp(state,old_state)||(this._debug("process_state","".concat(oid," s: ").concat(state.status,' v: "').concat(state.value,'"'),"ns: ".concat(state.nstatus,' nv: "').concat(state.nvalue,'"')),oid in this._update_state_functions&&this._update_state_functions[oid].map(function(f){try{"string"==typeof f||f instanceof String?eval(f):f(state)}catch(e){jsaltt.logger.error("state function processing for ".concat(oid,":"),e)}}),Object.keys(this._update_state_mask_functions).map(function(k){this._oid_match(oid,k)&&this._update_state_mask_functions[k].map(function(f){try{"string"==typeof f||f instanceof String?eval(f):f(state)}catch(e){jsaltt.logger.error("state function processing for ".concat(oid,":"),e)}})},this))}catch(e){jsaltt.logger.error("State processing error, invalid object received",e)}}},{key:"_invoke_handler",value:function _invoke_handler(handler){var f=this._handlers[handler];if(f){this._debug("invoke_handler","invoking for "+handler);try{if("string"==typeof f)return eval(f);if("function"==typeof f)return f.apply(this,[].slice.call(arguments,1))}catch(e){jsaltt.logger.error("handler for ".concat(handler,":"),e)}}}},{key:"_oid_match",value:function(e,t){return new RegExp("^"+t.split("*").join(".*")+"$").test(e)}},{key:"_debug",value:function(e){this.debug&&jsaltt.logger.debug.apply(jsaltt.logger,["EVA::"+e].concat([].slice.call(arguments,1)))}}]),EVA}(),$eva=new EVA;"object"===_typeof(exports)&&(exports.EVA=EVA,exports.$eva=$eva),"object"===("undefined"==typeof window?"undefined":_typeof(window))&&(window.$eva=$eva,window.eva_framework_version=eva_framework_version)}()}).call(this,__webpack_require__(1),__webpack_require__(4))},function(e,t){var o,r,n=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function i(e){if(o===setTimeout)return setTimeout(e,0);if((o===a||!o)&&setTimeout)return o=setTimeout,setTimeout(e,0);try{return o(e,0)}catch(t){try{return o.call(null,e,0)}catch(t){return o.call(this,e,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:a}catch(e){o=a}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l,c=[],u=!1,_=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):_=-1,c.length&&h())}function h(){if(!u){var e=i(d);u=!0;for(var t=c.length;t;){for(l=c,c=[];++_<t;)l&&l[_].run();_=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];c.push(new f(e,t)),1!==c.length||u||i(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t,o){"use strict";(function(e){(()=>{if(void 0!==e&&"browser"!==e.title)var r=o(7);class n{constructor(){this.log=console.log,this.colored=void 0!==r||"undefined"!=typeof window}_msg(e,t){if(arguments.length>2){var o=[].slice.call(arguments,2);if(this.colored){var r=[];if(t)o.map(function(e){e&&e.stack&&e.message||"object"==typeof e?r.push(e):r.push(t(e))});else{for(var n,a=!!e,s=0;s<o.length;s++){var i=o[s];!a||i&&i.stack&&i.message||"object"==typeof i?(a&&(a=!1,r.push(n),r.push(e)),r.push(i),n=null):(n?n+=" ":n="%c",n+=i)}n&&(r.push(n),r.push(e))}o=r}console.log.apply(null,o)}}debug(){var e,t;void 0===r?e="font-size: 12px; color: #999":t=r.gray,this._msg.apply(this,[e,t].concat(Array.from(arguments)))}info(){var e,t;void 0!==r||(e="font-size: 12px; color: black"),this._msg.apply(this,[e,t].concat(Array.from(arguments)))}warning(){var e,t;void 0===r?e="font-size: 14px; color: orange; font-weight: bold":t=r.bold.yellow,this._msg.apply(this,[e,t].concat(Array.from(arguments)))}error(){var e,t;void 0===r?e="font-size: 16px; color: red; font-weight: bold":t=r.bold.red,this._msg.apply(this,[e,t].concat(Array.from(arguments)))}critical(){var e,t;void 0===r?e="font-size: 25px; color: red; font-weight: bold":t=r.bold.red,this._msg.apply(this,[e,t].concat(Array.from(arguments)))}}let a=new n;t.logger=a,t.Logging=n,t.extend=function(){var e=function(){var t={},o=!1,r=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(o=arguments[0],r++);for(var a=function(r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(o&&"[object Object]"===Object.prototype.toString.call(r[n])?t[n]=e(!0,t[n],r[n]):t[n]=r[n])};r<n;r++)a(arguments[r]);return t};return e.apply(null,arguments)},t.cmp=function(e,t){if(void 0===e||void 0===t)return!1;var o=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(o.length!=r.length)return!1;for(var n=0;n<o.length;n++){var a=o[n];if(!Array.isArray(e[a])&&e[a]!==t[a])return!1}return!0},"object"==typeof window&&(window.$log=a)})()}).call(this,o(1))},function(e,t,o){o(0),o(9)},function(e,t){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(e){"object"==typeof window&&(o=window)}e.exports=o},function(e,t){e.exports=node-fetch},function(e,t){e.exports=ws},function(e,t){e.exports=chalk},function(e,t,o){"use strict";(()=>{function e(e,t,o,r){if("undefined"!=typeof document){var n,a=void 0!==r?r:"";if(o){var s=new Date;s.setTime(s.getTime()+24*o*60*60*1e3),n=s.toUTCString()}else n="";return document.cookie=`${e}=${t}; expires=${n}; path=${a}`,!0}}function o(e){if("undefined"!=typeof document){for(var t=e+"=",o=document.cookie.split(";"),r=0;r<o.length;r++){for(var n=o[r];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null}}function r(t,o){return e(t,"",-1,o)}t.read=o,t.create=e,t.erase=r,"object"==typeof window&&(window.$cookies={read:o,create:e,erase:r})})()},function(e,t,o){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var e=o(0),n=o(2),a=e.$eva;function s(e,t,o,s,l){!function s(){var c,u=n.extend({},u);c="object"===r(o)?o:o.split(",");var _=u.timeframe;_||(_="1D");var d=u.fill;d||(d="30T:2");var h=u.update,f=u.prop,p=document.getElementById(e),v=u.u,g=null;if(l&&(g=l),void 0!==l&&(p.offsetWidth<=0||p.offsetHeight<=0))g&&g.destroy();else{var m=new Date;"T"==_[_.length-1]?m.setMinutes(m.getMinutes()-_.substring(0,_.length-1)):"H"==_[_.length-1]?m.setHours(m.getHours()-_.substring(0,_.length-1)):"D"==_[_.length-1]&&m.setHours(m.getHours()-24*_.substring(0,_.length-1)),l||i(e);var b="value";null!=f&&(b=f),a.call("state_history",c,{t:"iso",s:m.toISOString(),x:b,w:d}).then(function(e){if(g){g.data.labels=e.t;for(var o=0;o<c.length;o++)g.data.datasets[o].data=e[c[o]+"/"+b];g.update()}else{var r=document.createElement("canvas");r.style.width="100%",r.style.height="100%",r.className="eva_toolbox_chart";var a=n.extend({},t);for(a.data.labels=e.t,o=0;o<c.length;o++)a.data.datasets[o].data=e[c[o]+"/"+b];p.innerHTML="",p.appendChild(r),g=new Chart(r,a),v&&(a.options.tooltips.callbacks.label=function(e){return e.yLabel+v})}}).catch(function(e){var t=document.createElement("div");t.className="eva_toolbox_chart",t.style.cssText="width: 100%; height: 100%; color: red; font-weight: bold; font-size: 14px",t.innerHTML="Error loading chart data: "+e.message,p.innerHTML="",p.appendChild(t),g&&g.destroy(),g=null}),h&&setTimeout(function(){s()},1e3*h)}}()}function i(e){document.getElementById(e).innerHTML='<div class="eva-toolbox-cssload-square"><div       class="eva-toolbox-cssload-square-part       eva-toolbox-cssload-square-green"></div><div       class="eva-toolbox-cssload-square-part       eva-toolbox-cssload-square-pink"></div><div       class="eva-toolbox-cssload-square-blend"></div></div>'}function l(e,t){(t=t)||(t={});var o=t.url;o||(o=document.location);var r=t.user;void 0===r&&(r=a.authorized_user);var n=t.password;void 0===n&&(n=a.password);var s=t.size;if(s||(s=200),!o||!r)return!1;var i=document.createElement("a");i.href=o;var l=i.protocol.substring(0,i.protocol.length-1),c=i.hostname,u=i.port;u||(u="http"==l?80:443);var _="scheme:"+l+"|address:"+c+"|port:"+u+"|user:"+r;return n&&(_+="|password:"+n),new QRious({element:document.getElementById(e),value:_,size:s})}function c(e,t,o,r,n){return(n=n)||(n={}),new Promise(function(a,s){if("undfined"===document)throw Error("DOM is required");var i=document.getElementById(e);if(null==i)throw Error("DOM context ".concat(e," not found"));var l=n.ct,c=n.btn1,u=n.btn2,_=n.va,d=t;"!"==t[0]&&(d=t.substr(1));var h=function(e){return"info"==e?20:"warning"==e?30:"error"==e?40:0};if(i&&h(i.priority)>h(d))throw Error("popup with higher priority is already active");i&&(clearInterval(i.ticker),document.removeEventListener("keydown",i.key_listener)),i.innerHTML="",i.priority=d,i.className="eva_toolbox_popup";var f=document.createElement("div");i.appendChild(f),"!"==t[0]?f.className="eva_toolbox_popup_window_big":f.className="eva_toolbox_popup_window";var p=document.createElement("div");p.className="eva_toolbox_popup_header eva_toolbox_popup_header_"+d,p.innerHTML=null!=o?o:d.charAt(0).toUpperCase()+d.slice(1),f.append(p);var v=document.createElement("div");v.className="eva_toolbox_popup_content",v.innerHTML=r,f.appendChild(v);var g=document.createElement("div");g.className="eva_toolbox_popup_footer",f.appendChild(g);var m=document.createElement("div");m.className="row",f.appendChild(m);var b=document.createElement("div"),y=document.createElement("div"),w=document.createElement("div");w.className="col-xs-1 col-sm-2",m.appendChild(w),m.appendChild(b),m.appendChild(y),(w=document.createElement("div")).className="col-xs-1 col-sm-2",m.appendChild(w);var k="OK";c&&(k=c);var x=document.createElement("div");x.className="eva_toolbox_popup_btn eva_toolbox_popup_btn_"+d,x.innerHTML=k;var j,E=function(){clearInterval(i.ticker),document.getElementById(e).style.display="none",document.getElementById(e).innerHTML="",document.removeEventListener("keydown",i.key_listener),i.priority=null},T=function(){(void 0===_||null==_||_())&&(E(),a(!0))};if(x.addEventListener("click",T),b.appendChild(x),u?((j=document.createElement("div")).className="eva_toolbox_popup_btn eva_toolbox_popup_btn_"+d,j.innerHTML=u,j.addEventListener("click",function(){E(),s(!0)}),y.appendChild(j),b.className+=" col-xs-5 col-sm-4",y.className+=" col-xs-5 col-sm-4"):(b.className+=" col-xs-10 col-sm-8",y.style.display="none"),i.style.display="block",i.key_listener=function(e){27==e.which&&(E(),s(),e.preventDefault()),13==e.which&&(T(),e.preventDefault())},document.addEventListener("keydown",i.key_listener),l&&l>0){i.ct=l;var S=function(){var e;i.ct<=0&&(E(),s());var t="";j?(e=j,t=u):(e=x,t=k),e.innerHTML="".concat(t," (").concat(i.ct,")"),i.ct-=1};S(),i.ticker=setInterval(S,1e3)}})}!function(){var e=window.$eva;"object"===r(e)&&(e.toolbox||(e.toolbox={}),e.toolbox.chart=s,e.toolbox.animate=i,e.toolbox.hiQR=l,e.toolbox.popup=c)}(),"object"===r(t)&&(t.chart=s,t.animate=i,t.hiQR=l,t.popup=c)}()}]);